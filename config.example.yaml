# Discord DKP Bot Configuration
#
# Environment variables can be referenced using ${VAR} or $VAR syntax,
# following the CNCF convention (OTel Collector, Prometheus, etc.).

discord:
  token: "${DISCORD_TOKEN}"
  guild_id: "${DISCORD_GUILD_ID}"

database:
  host: "localhost"
  port: 5432
  user: ${DB_USER}
  password: ${DB_PASSWORD}
  dbname: "dkpbot"
  sslmode: "disable"
  driver: "sqlx"  # "sqlx" or "ent"

server:
  port: 8080
  shutdown_timeout: 15s

telemetry:
  service_name: "dkpbot"
  service_version: "0.1.0"
  otlp_endpoint: "localhost:4318"
  insecure: true

# Leader election enables HA by ensuring only one replica
# actively runs the Discord bot at a time. Requires running
# inside a Kubernetes cluster with RBAC for Lease resources.
leader_election:
  enabled: false
  lease_name: "dkpbot-leader"
  lease_namespace: "default"
  lease_duration: 15s
  renew_deadline: 10s
  retry_period: 2s
