replicaCount: 3

image:
  repository: ghcr.io/jensholdgaard/dkpbot
  pullPolicy: IfNotPresent
  tag: ""

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""

service:
  type: ClusterIP
  port: 8080

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 100m
    memory: 128Mi

config:
  discord:
    token: ""
    guild_id: ""
  database:
    host: "postgres"
    port: 5432
    user: "dkpbot"
    password: "changeme"
    dbname: "dkpbot"
    sslmode: "disable"
    driver: "sqlx"
  server:
    port: 8080
    shutdown_timeout: "15s"
  telemetry:
    service_name: "dkpbot"
    service_version: "0.1.0"
    otlp_endpoint: "otel-collector.observability.svc:4318"
    insecure: true

# CloudNative-PG integration.
# When enabled, database credentials are read from the Secret created
# by the CNPG operator instead of from the inline config above.
cloudnativePG:
  enabled: false
  # Name of the CNPG Cluster resource (the operator creates a Secret
  # named "<clusterName>-app" with host, port, dbname, user, password).
  clusterName: "dkpbot-db"

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

leaderElection:
  enabled: true
  leaseName: "dkpbot-leader"
  leaseDuration: "15s"
  renewDeadline: "10s"
  retryPeriod: "2s"
