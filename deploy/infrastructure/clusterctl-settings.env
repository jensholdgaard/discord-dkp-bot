# Cluster API – Hetzner Cloud Provider (CAPH)
#
# IMPORTANT: Do NOT put real credentials in this file.
# Copy it to .env, fill in your values there, and source it:
#
#   cp clusterctl-settings.env .env
#   # edit .env with real values
#   source .env
#
# The .env file is git-ignored and will not be committed.

# ─── Hetzner API ────────────────────────────────────────────────
# Create at https://console.hetzner.cloud → Security → API Tokens
export HCLOUD_TOKEN="<your-hetzner-cloud-api-token>"

# SSH key name registered in Hetzner Cloud console
# The bootstrap script will auto-create this key if it doesn't exist.
export HCLOUD_SSH_KEY="dkpbot-ssh"

# Optional: Path to an SSH public key file to upload to Hetzner Cloud.
# If not set, the bootstrap script tries ~/.ssh/id_ed25519.pub,
# ~/.ssh/id_rsa.pub, or generates a new key pair.
# export HCLOUD_SSH_PUBKEY_FILE=""

# ─── Cluster Settings ──────────────────────────────────────────
export CLUSTER_NAME="dkpbot-prod"
export KUBERNETES_VERSION="v1.31.6"
export HCLOUD_REGION="nbg1"           # Nuremberg; also: fsn1, hel1
export CONTROL_PLANE_MACHINE_COUNT=1
export WORKER_MACHINE_COUNT=1

# ─── Machine Types ─────────────────────────────────────────────
export HCLOUD_CONTROL_PLANE_MACHINE_TYPE="cx21"
export HCLOUD_WORKER_MACHINE_TYPE="cx21"

# ─── Networking ────────────────────────────────────────────────
export HCLOUD_NETWORK_ZONE="eu-central"

# ─── FluxCD / GitHub ──────────────────────────────────────────
# Personal access token with repo scope (for Flux bootstrap)
export GITHUB_TOKEN="<your-github-pat>"
export GITHUB_USER="jensholdgaard"

# Git branch for Flux to track. Defaults to "main".
# Set to a feature branch to test infrastructure changes before merging.
# export FLUX_BRANCH="main"

# ─── CNPG Backup — Hetzner Object Storage (S3) ───────────────
# Create at Hetzner Cloud Console → Object Storage → S3 Credentials
# These are used to create the backup-s3-credentials Kubernetes Secret
# which CNPG uses for WAL archiving and base backups.
export CNPG_S3_ACCESS_KEY="<your-hetzner-s3-access-key>"
export CNPG_S3_SECRET_KEY="<your-hetzner-s3-secret-key>"
export CNPG_S3_ENDPOINT="https://nbg1.your-objectstorage.com"
export CNPG_S3_BUCKET="dkpbot-backups"
